<div class="container mt-5">
  <div class="row mb-4">
    <div class="col-12">
      <h2 class="page-title">My Orders</h2>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="orders === null || orders.length === 0" class="empty-state">
    <i class="fas fa-shopping-bag empty-icon"></i>
    <h4>No Orders Found</h4>
    <p>You haven't placed any orders yet.</p>
  </div>

  <!-- Orders Content -->
  <div *ngIf="orders && orders.length > 0">
    <!-- Filters Section -->
    <div class="row mb-4">
      <div class="col-md-6 mb-3 mb-md-0">
        <label class="filter-label">Filter by Status</label>
        <!-- <select class="form-select custom-select" [(ngModel)]="orderParams.status"
                (change)="onSelectStatus(orderParams.status!)">
          <option *ngFor="let status of statusOptions" [value]="status.value">
            {{status.name}}
          </option>
        </select> -->
        <ng-select [items]="statusOptions"
           bindLabel="name"
           bindValue="value"
           [(ngModel)]="orderParams.status"
           (change)="onSelectSort(orderParams.status!)"
           placeholder="Select Status">
</ng-select>
      </div>
      
      <div class="col-md-6">
        <label class="filter-label">Sort by</label>
        <!-- <select class="form-select custom-select" [(ngModel)]="orderParams.sort"
                (change)="onSelectSort(orderParams.sort!)">
          <option *ngFor="let sort of sortOptions" [value]="sort.value">
            {{sort.name}}
          </option>
        </select> -->
        <ng-select [items]="sortOptions"
           bindLabel="name"
           bindValue="value"
           [(ngModel)]="orderParams.sort"
           (change)="onSelectSort(orderParams.sort!)"
           placeholder="Select Sort">
</ng-select>
      </div>
    </div>

    <!-- Results Count -->
    <div class="results-info mb-3">
      <!-- <span>Showing <strong>{{orders.length}}</strong> of <strong>{{orderParams.count}}</strong> orders</span> -->
       <app-paging-header [params]="orderParams"></app-paging-header>
    </div>

    <!-- Orders Table -->
    <div class="table-responsive">
      <table class="table custom-table">
        <thead>
          <tr>
            <th scope="col">Order #</th>
            <th scope="col">Date</th>
            <th scope="col">Total</th>
            <th scope="col">Status</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders" class="order-row">
            <td class="order-id">
              <strong>#{{order.id}}</strong>
            </td>
            <td>
              <div class="order-date">
                {{order.orderDate | date : 'MMM d, y'}}
              </div>
              <small class="text-muted">{{order.orderDate | date : 'h:mm a'}}</small>
            </td>
            <td>
              <span class="order-total">{{order.total | currency}}</span>
            </td>
            <td>
              <span class="status-badge"
                    [class.status-success]="order.status==='Payment Received'"
                    [class.status-failed]="order.status==='Payment Failed'"
                    [class.status-pending]="order.status==='Pending'">
                <i class="fas fa-circle status-dot"></i>
                {{order.status==='Payment Received'? 'Success'
                  : order.status==='Payment Failed'? 'Failed'
                  : 'Pending'}}
              </span>
            </td>
            <td>
              <button class="btn btn-sm btn-view" [routerLink]="['/orders', order.id]">
                <i class="fas fa-eye me-1"></i> View
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="d-flex justify-content-center mt-4"
         *ngIf="orderParams.count > orderParams.pageSize">
      <app-pager [params]="orderParams" (pageChanged)="onPageChanged($event)"></app-pager>
    </div>
  </div>
</div>